第二章感想
===

Java8で最も目玉機能である、`Stream`について解説している章です。この章をひと通り読むと、`Stream`の概要をつかむことができるでしょう。

僕はこの本を読む前に大体わかっているつもりでしたが、いろいろと新しい発見があったように思います。

#### 新たな発見

1. `Stream`が`AutoCloseable`の実装クラスであるということ
1. `collect`メソッドによって`Collection`に柔軟に収集可能であること

最初の事に関しては別のエントリー

* [StreamはAutoCloseableであると認識していないとアレな件](http://mike-neck.hatenadiary.com/entry/2014/10/12/133434)

に詳しく書いてあります。

詳しくは上記のエントリーに譲るとして、端的に書くと、ファイルIOで`Stream`を取得する場合には
*try-with-resource*で扱わないとリソースリークが発生する可能性があるということを覚えておいたほうがよいです。

2.については実際に読んで手を動かしてみると納得できると思います。

#### 物足りなかったこと

* `Optional`についての解説がちょっとしかない

`Optional`自体はそれほど機能豊富なものではなく、`null`安全性を保証するだけの機能です。

しかし、Javaでの`null`に対するプログラマー間の認識違いが多くのバグの温床になったり、
過剰に防衛的なプログラミングを生み出すなどJavaのコードを汚くする原因にもなっているなど、
Javaの`null`はプログラマーを悩ましてきたものです。

`Optional`は`null`に毒されてきたJavaにパラダイムシフトを促すものです。
したがって、いやというほど`Optional`についてJavaプログラマーに叩きこむくらいの勢いを持って解説して欲しかったという、
思いがあります。

とはいえ、Cay S.Horstmannにも何か考えがあったのだと思うので、まあ、何かあるんでしょう(トートロジー)。

#### この章を読むときの注意

メモとかCAUTIONとかすごく小さく扱われている部分ですが、非常に重要な事が書いてあるので読み飛ばさないほうがよいです。

例えば、コレクションから生成された`Stream`は、元のコレクションの変更に対して非常に弱いです。
それはスレッドセーフなコレクションから生成されたとか関係ないものです。
ただ、これが小さなCAUTIONの中に書かれていたりするので、読み飛ばさないようにしたほうがよいでしょう。

また、新たな発見のところでも書いたファイルIOから`Stream`を生成する場合のリソースリークの可能性を発見したのも、メモを読んでいる時です。
